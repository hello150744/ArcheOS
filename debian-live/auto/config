#!/bin/sh
#
# Edit this file carefully!
#

set -e

case "$(dpkg --print-architecture)" in
    amd64)
        _LINUX_FLAVOURS="amd64"
        ;;
    i386)
        _LINUX_FLAVOURS="486 686-pae"
        ;;
esac

lb config noauto \
    --clean \
    --ignore-system-defaults \
    -b iso-hybrid \
    --memtest none \
    --linux-flavours "${_LINUX_FLAVOURS}" \
    --distribution wheezy \
    --debian-installer live \
    --debian-installer-gui true \
    --firmware-binary true \
    --firmware-chroot true \
    --keyring-packages archeos-keyring \
    --bootappend-live "boot=live config username=archeos hostname=archeosbox" \
    --archive-areas "main contrib non-free" \
    --apt-ftp-proxy 'http://localhost:3142/' \
    --apt-http-proxy 'http://localhost:3142/' \
    --mirror-binary "http://ftp.it.debian.org/debian" \
    --mirror-binary-security "http://security.debian.org/" \
    --mirror-bootstrap "http://apt.fabfur.it" \
    --mirror-chroot  "http://localhost:3142/ftp.it.debian.org/debian" \
    --mirror-chroot-security "http://localhost:3142/security.debian.org/" \
    --parent-mirror-bootstrap "http://apt.fabfur.it" \
    --iso-application "ArcheOS" \
    --iso-publisher "ArcheOS Team" \
    --iso-volume "ArcheOS 5 Theodoric" \
    "${@}"

